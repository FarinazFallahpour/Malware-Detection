%% CalculateLocxi (By: Nilofar Rastin,Farinaz Falahpour)
%%
%calculating log(p(xi|+)/(p(xi|-)) for all the features and saving them in
%'out' Cell
%%
clear all;
clc;
Spambase=load('spambase.data');
load('Domain.mat');

Inst=Spambase;
[numInst numFeat]=size(Inst);  
numFeat=numFeat-1;
Out=cell(numFeat,1);
%%
%calculating loc(xi) for all the features of one instance 
%%
for xi=1:numFeat
    [Out{xi}]=LOCxi(Inst,xi);
end
%%
%the results of  log(p(xi|+))/p(xi\-)) for som features are Inf and -Inf,we change
%Inf with 0.1 and -0.1
%%
posinf=0.1;
neginf=-0.1;

for xi=1:numFeat
    for f=1:size(Domain{xi},1)
        if(Out{xi}(f)==Inf)
           Out{xi}(f)=posinf;
        elseif (Out{xi}(f)==-Inf)
           Out{xi}(f)=neginf;
        end
      end
end

save('Out','Out')
