%% Locxi.m (By: Nilofar Rastin,Farinaz Falahpour)
%xi is one feature from totlal features
%%
function [Out]=LOCxi(Inst,xi)

Spambase=load('spambase.data');
Inst=Spambase;
[numInst numFeat]=size(Inst);
numFeat=numFeat-1;
load('Domain.mat');
CountPosL=1814;
CountNegL=2787;
CountFeat1=cell(numFeat,1);
CountFeat2=cell(numFeat,1);
%%
%calculating p(+),p(-)
%%
for k=1:numFeat
        CountFeat1{k}=zeros(size(Domain{k},1),1);%p(+)
        CountFeat2{k}=zeros(size(Domain{k},1),1);%p(-)
end
%%
%calculating p(xi|+),p(xi|-)
%%
 for j=1:numInst  
     
     for f=1:size(Domain{xi},1)
         if (Inst(j,end)==1) && (Inst(j,xi)==Domain{xi}(f))
             CountFeat1{xi}(f)=CountFeat1{xi}(f)+1;
         end
         
         if (Inst(j,end)==0) && (Inst(j,xi)==Domain{xi}(f))
         CountFeat2{xi}(f)=CountFeat2{xi}(f)+1;
         end 
     end
     
 end
 
 
 for k=1:numFeat
 P1{k}=CountFeat1{k}/CountPosL;%p(xi|+)
 P2{k}=CountFeat2{k}/CountNegL;%p(xi|-)
 end
 
%%
%caculating loc(xi)
%%
Out=log( P1{xi} ./ P2{xi} ); %loc(xi)

end
