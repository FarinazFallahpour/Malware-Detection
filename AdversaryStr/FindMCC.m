%% FindMCC.m (By: Nilofar Rastin,Farinaz Falahpour)
%i is the total number of features(i=57)
%w is the  discritized value of gap
%j is the index of instance(j=1 or 2 or ... 4096)
%Inst is the totlal database
%%
function [MinCost,MinList]=FindMCC(i,w,j,Inst)

if(w<=0) 
   MinCost=0;
   MinList=[]; 
   return 
end
 
if(i==0)
   MinCost=Inf;
   MinList=NaN;
   return
end 
 

MinCost=Inf;
MinList=NaN;

load('Domain');
load('Out.mat');   

for f=1:size(Domain{i},1)
    index=find(Inst(j,i)==Domain{i});%find the cuurrent value of i'th feature
    Deltaloc{i}(f)=Out{i}(index)-Out{i}(f);%out has the log(p(Xi=xi|+)/(p(Xi=xi|-)) for i'th feature and it's f'th value

   if  (Deltaloc{i}(f)>0) 
       [CurCost,CurList]=FindMCC((i-1),(w-Deltaloc{i}(f)),j,Inst)
       CurCost=CurCost+0.2
       x=Domain{i}(f);
       CurList=[CurList i x ];
   
    
   if (CurCost<MinCost)
       MinCost=CurCost;
       MinList=CurList;
   end
    
   end

   
end
 
   MinCost=MinCost;
   MinList=MinList ;
 
 return
end

 

